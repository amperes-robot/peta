#include <iostream>
#include "test.h"
#include "io.h"
#include "pid.h"

std::string assert_message;

const TestCallback* suites[] =
{
	io::test_suite,
	pid::test_suite,
	nullptr
};

int main()
{
	std::cout << "=== TESTS BEGIN ===" << std::endl;
	for (const TestCallback** i = suites; *i != nullptr; i++)
	{
		for (const TestCallback* o = *i; o->handle != nullptr; o++)
		{
			assert_message = "";
			(o->handle)();

			if (assert_message == "")
			{
				std::cout << "PASSED (" << o->name << ")" << std::endl;
			}
			else
			{
				std::cout << "FAILED: " << assert_message << " (" << o->name << ")" << std::endl;
			}
		}
	}
	std::cout << "=== TESTS FINISHED ===" << std::endl;
	return 0;
}
